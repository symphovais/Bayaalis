{{ define "main" }}
<section class="section container-fluid mt-n3 pb-3">
  <div class="row justify-content-center">
    <div class="col-lg-12 text-center">
      <h1>{{ .Title }}</h1>
    </div>
    <div class="col-lg-9 col-xl-8 text-center">
      <p class="lead">{{ .Params.lead | safeHTML }}</p>
      {{ .Content }}
    </div>
  </div>

  <!-- Blog Posts Section -->
  <div class="row justify-content-center mt-5">
    <div class="col-xl-11">
      <h2 class="text-center mb-4">Latest Blog Posts</h2>
      <!-- Set posts per page to 20 -->
      {{ $paginator := .Paginate (where .Site.RegularPages "Section" "blog") 20 }}
      <div class="row row-cols-1 row-cols-lg-2 g-4">
        {{ range $paginator.Pages }}
          <div class="col">
            <div class="card h-100 shadow-sm">
              <div class="row g-0 align-items-center h-100">
                <!-- Image Section -->
                <div class="col-auto">
                  <a href="{{ .RelPermalink }}" class="d-block" style="width: 120px;">
                    <img src="{{ if .Params.featuredImage }}{{ .Params.featuredImage }}{{ else }}/Symphonytek_logo.png{{ end }}" 
                         class="img-fluid" 
                         style="width: 120px; height: 120px; object-fit: cover;" 
                         alt="Blog Image for {{ .Title }}">
                  </a>
                </div>
                <!-- Content Section -->
                <div class="col">
                  <div class="card-body py-2 px-3">
                    <h3 class="card-title h5 mb-1">
                      <a class="text-dark text-decoration-none stretched-link" href="{{ .RelPermalink }}">
                        {{ .Title }}
                      </a>
                    </h3>
                    <p class="text-muted small mb-0">
                      {{ .Date.Format "January 2, 2006" }}
                      <span class="mx-2">â€¢</span>
                      {{ .ReadingTime }} min read
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{ end }}
      </div>
    </div>
  </div>

  <!-- Enhanced Pagination -->
  <div class="row justify-content-center mt-4">
    <div class="col-auto">
      {{ if gt $paginator.TotalPages 1 }}
      <nav aria-label="Blog navigation">
        <ul class="pagination">
          <!-- First page -->
          {{ if ne $paginator.PageNumber 1 }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.First.URL }}" aria-label="First">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          {{ end }}
          
          <!-- Previous page -->
          {{ if $paginator.HasPrev }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Prev.URL }}" aria-label="Previous">
              <span aria-hidden="true">&lsaquo;</span>
            </a>
          </li>
          {{ end }}
          
          <!-- Page numbers -->
          {{ range $paginator.Pagers }}
          <li class="page-item{{ if eq . $paginator }} active{{ end }}">
            <a class="page-link" href="{{ .URL }}">{{ .PageNumber }}</a>
          </li>
          {{ end }}
          
          <!-- Next page -->
          {{ if $paginator.HasNext }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Next.URL }}" aria-label="Next">
              <span aria-hidden="true">&rsaquo;</span>
            </a>
          </li>
          {{ end }}
          
          <!-- Last page -->
          {{ if ne $paginator.PageNumber $paginator.TotalPages }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Last.URL }}" aria-label="Last">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
          {{ end }}
        </ul>
      </nav>
      {{ end }}
    </div>
  </div>

  <style>
    .card {
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 .5rem 1rem rgba(0,0,0,.1)!important;
    }
    .page-link {
      color: #333;
      border-color: #dee2e6;
    }
    .page-item.active .page-link {
      background-color: #333;
      border-color: #333;
    }
    @media (max-width: 991.98px) {
      .col-auto img {
        width: 100px !important;
        height: 100px !important;
      }
    }
  </style>
</section>
{{ end }}